<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


    
<mapper namespace="query.crawler">

	 <resultMap id="selectWebPageInfoListResult" type="com.zebra.process.crawler.domain.WebPageInfoBO" >
	        <result column="siteConfigSeq" property="siteConfigSeq" />
			<result column="pageInfoListSeq" property="webPageInfoSeq" />
			<result column="goodsNo" property="goodsNo" />
			<result column="goodsNm" property="goodsNm" />
			<result column="goodsPrice" property="goodsPrice" />
			<result column="goodsUrl" property="goodsUrl" />
			<result column="goodsImg" property="goodsImg" />
			<result column="updateDt" property="updateDt" />
			<result column="updateNo" property="updateNo" />
			<result column="createDt" property="createDt" />
			<result column="createNo" property="createNo" />
	 </resultMap>
	<!-- 페이지 리스트 -->
	<select id="selectPageInfoList" resultMap="selectWebPageInfoListResult" parameterType="com.zebra.process.crawler.domain.WebPageInfoBO">
	     	SELECT /*crawler.selectPageInfoList*/  pageInfoListSeq, siteConfigSeq, goodsNo, goodsNm, goodsPrice, goodsUrl, goodsImg,   createNo, createDt, updateDt, updateNo 
			FROM 
			page_info_list
			where 1=1
			and statCd != '03'
			<if test="siteConfigSeq != null and siteConfigSeq != ''">
				and   siteConfigSeq =  #{siteConfigSeq} 
			</if>
			<if test="pageInfoListSeq != null and pageInfoListSeq != ''">
				and   pageInfoListSeq = #pageInfoListSeq}
			</if>		
	</select>
	
		<select id="selectPageInfoMap" resultType="java.util.HashMap" resultMap="selectWebPageInfoListResult" parameterType="com.zebra.process.crawler.domain.WebPageInfoBO">
	     	SELECT /*crawler.selectPageInfoList*/  pageInfoListSeq, siteConfigSeq, goodsNo, goodsNm, goodsPrice, goodsUrl, goodsImg,   createNo, createDt, updateDt, updateNo 
			FROM 
			page_info_list
			where 1=1
			and statCd != '03'
			<if test="siteConfigSeq != null and siteConfigSeq != ''">
				and   siteConfigSeq =  #{siteConfigSeq} 
			</if>
			<if test="pageInfoListSeq != null and pageInfoListSeq != ''">
				and   pageInfoListSeq = #{pageInfoListSeq}
			</if>		
	</select>
	
	
	

	<resultMap id="selectCrawConfigResult" type="com.zebra.process.crawler.domain.CrawConfigBO" >
	        <result column="siteConfigSeq" property="siteConfigSeq" />
			<result column="siteNm" property="siteNm" />
			<result column="seedURL" property="seedStrURL" />
			<result column="useYn" property="useYn" />
	 </resultMap>
	<!-- 페이지 리스트 -->
	<select id="selectCrawConfigList" resultMap="selectCrawConfigResult" parameterType="com.zebra.process.crawler.domain.CrawConfigBO">
	     	
	     	SELECT /*crawler.selectCrawConfigList*/ siteConfigSeq, siteNm, seedURL, useYn, createNo, createDt, updateDt, updateNo 
			FROM craw_config
			where 1=1
			<if test="useYn != null and useYn != ''">
				and useYn = #{useYn}
			</if>
			<if test="siteConfigSeq != null and siteConfigSeq != ''">
				and siteConfigSeq =  #{siteConfigSeq} 
			</if>
			<if test="pageInfoListSeq != null and pageInfoListSeq != ''">
				and pageInfoListSeq = #{pageInfoListSeq}
			</if>		
	</select>
	
	<insert id="insertPageInfoList"  parameterType="com.zebra.process.crawler.domain.PageInfoListBO">
		
		INSERT /*insertPageInfoList */ INTO page_info_list
			(siteConfigSeq
			<if test="goodsNo != null and goodsNo != ''">, goodsNo</if>
			<if test="goodsNm != null and goodsNm != ''">, goodsNm</if>
			<if test="goodsPrice != null and goodsPrice != ''">, goodsPrice</if>
			, goodsUrl
			<if test="goodsImg != null and goodsImg != ''">, goodsImg</if>
			<if test="statCd != null and statCd != ''">, statCd</if>
			<if test="createNo != null and createNo != ''">, createNo</if>
			<if test="createDt != null and createDt != ''">, createDt</if>
			<if test="updateDt != null and updateDt != ''">, updateDt</if>
			<if test="updateNo != null and updateNo != ''">, updateNo</if>
			) 
		VALUES (#{siteConfigSeq}
			<if test="goodsNo != null and goodsNo != ''">, #{goodsNo}</if>
			<if test="goodsNm != null and goodsNm != ''">, #{goodsNm}</if>
			<if test="goodsPrice != null and goodsPrice != ''">,#{goodsPrice}</if>
			, #{goodsUrl}
			<if test="goodsImg != null and goodsImg != ''">, #{goodsImg}</if>
			<if test="statCd != null and statCd != ''">, #{statCd}</if>
			<if test="createNo != null and createNo != ''">, #{createNo}</if>
			<if test="createDt != null and createDt != ''">, #{createDt}</if>
			<if test="updateDt != null and updateDt != ''">, #{updateDt}</if>
			<if test="updateNo != null and updateNo != ''">, #{updateNo}</if>		
			)
	</insert>
	
	  
</mapper>

